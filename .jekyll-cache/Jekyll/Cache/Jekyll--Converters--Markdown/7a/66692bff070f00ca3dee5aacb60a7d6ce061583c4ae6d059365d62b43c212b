I"m<p>Voici un site web pour trouver le centre de dépistage du Covid le plus proche de chez vous : <a href="https://prrojet-tests-covid.nw.r.appspot.com/">Le site</a></p>

<p><a href="https://prrojet-tests-covid.nw.r.appspot.com/"><img src="/assets/img/homepage-test-covid.png" alt="Accéder au site" /></a></p>

<h2 id="comment-cette-application-a-été-construite-">Comment cette application a été construite ?</h2>

<h3 id="source-des-données">Source des données</h3>

<p>Les données sont des données publiques disponibles sur data.gouv.fr. C’est une base au format CSV qui recense les centres de dépsitages avec leur localisation et des informations complémentaires (numéro de téléphone, site internet …) :</p>

<blockquote>
  <p><a href="https://www.data.gouv.fr/fr/datasets/sites-de-prelevements-pour-les-tests-covid/">https://www.data.gouv.fr/fr/datasets/sites-de-prelevements-pour-les-tests-covid/</a></p>
</blockquote>

<h3 id="enrichissement-et-stockage-des-données">Enrichissement et stockage des données</h3>

<p>Les données sont stockées sur une base <strong>BigQuery (Google Cloud Platform)</strong>. Grâce aux champs de latitude et de longitude, un nouveau champ Geometry a été créé. Celui-ci est indispensable pour retrouver les centres de dépistage les plus proches dans l’application.</p>

<h3 id="fonctionnement-de-lapplication">Fonctionnement de l’application</h3>

<p>L’application est contruite en Python avec <strong>Flask</strong> et le Framework <strong>Materialize</strong> pour le rendu.</p>

<h4 id="étape-1--récupération-des-coordonnées-géographiques">Étape 1 : Récupération des coordonnées géographiques</h4>

<p>Une fois l’adresse postale envoyée, une requête est envoyée à l’API de <a href="https://geo.api.gouv.fr/adresse">adresse.gouv.fr</a> pour récupérer les coordonnées XY.</p>

<h4 id="étape-2--requêter-les-centres-de-dépistage-les-plus-proches">Étape 2 : Requêter les centres de dépistage les plus proches</h4>

<p>Une fois les coordonnées XY récupérées, La base <strong>BigQuery</strong> est requêtée grâce à la fonction <em>ST_DISTANCE</em> pour renvoyer les 10 résultats les plus proches, leurs attributs, ainsi que la distance calculée.</p>

<h4 id="étape-3--rendu-dans-lapplication">Étape 3 : Rendu dans l’application</h4>

<p>Une fois les centres de dépistage les plus proches récupérés, Flask créé un JSON et le renvoie sur la page de résultats. La page est alors générée grâce au moteur de rendu de Flask (template Jinja2) et une card est créée pour chaque établissement.</p>

<p>Il est également possible de récupérer les résultats au format JSON. <a href="https://prrojet-tests-covid.nw.r.appspot.com/api">Voir le fonctionnement de l’API</a></p>

<h3 id="hébergement">Hébergement</h3>

<p>L’application Flask est hégergée sur <strong>Google App Engine</strong></p>

:ET